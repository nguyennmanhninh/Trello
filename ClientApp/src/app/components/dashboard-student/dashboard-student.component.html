<div class="dashboard-student">
  <div class="dashboard-header">
    <h1>Dashboard Sinh viÃªn</h1>
    <p class="subtitle">ThÃ´ng tin há»c táº­p vÃ  Ä‘iá»ƒm sá»‘ cá»§a báº¡n</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Äang táº£i dá»¯ liá»‡u...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <p class="error-message">{{ error }}</p>
    <button class="btn-retry" (click)="loadDashboardData()">Thá»­ láº¡i</button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading && !error" class="dashboard-content">
    
    <!-- Summary Cards -->
    <div class="summary-grid">
      <div class="summary-card card-class">
        <div class="card-icon">ğŸ«</div>
        <div class="card-info">
          <h3>{{ studentClass?.className || 'ChÆ°a cÃ³ lá»›p' }}</h3>
          <p>Lá»›p há»c</p>
          <small *ngIf="studentClass">{{ studentClass.departmentName }}</small>
        </div>
      </div>

      <div class="summary-card card-average">
        <div class="card-icon">ğŸ“Š</div>
        <div class="card-info">
          <h3 [ngClass]="getScoreClass(averageScore)">{{ averageScore | number:'1.2-2' }}</h3>
          <p>Äiá»ƒm trung bÃ¬nh</p>
        </div>
      </div>

      <div class="summary-card card-courses">
        <div class="card-icon">ğŸ“š</div>
        <div class="card-info">
          <h3>{{ studentGrades.length }}</h3>
          <p>MÃ´n há»c Ä‘Ã£ cÃ³ Ä‘iá»ƒm</p>
        </div>
      </div>

      <div class="summary-card card-credits">
        <div class="card-icon">ğŸ“</div>
        <div class="card-info">
          <h3>{{ totalCredits }}</h3>
          <p>Tá»•ng tÃ­n chá»‰</p>
        </div>
      </div>
    </div>

    <!-- Grade Chart -->
    <div *ngIf="studentGrades.length > 0" class="chart-section">
      <div class="chart-container">
        <canvas id="gradeChart"></canvas>
      </div>
    </div>

    <!-- Grades Table -->
    <div class="grades-section">
      <div class="section-header">
        <h2>ğŸ“ Báº£ng Ä‘iá»ƒm</h2>
        <a [routerLink]="['/grades']" class="view-all-link">Xem chi tiáº¿t â†’</a>
      </div>

      <div *ngIf="studentGrades.length === 0" class="empty-state">
        <p>Báº¡n chÆ°a cÃ³ Ä‘iá»ƒm nÃ o</p>
      </div>

      <div *ngIf="studentGrades.length > 0" class="grades-table-container">
        <table class="grades-table">
          <thead>
            <tr>
              <th>MÃ´n há»c</th>
              <th class="text-center">TÃ­n chá»‰</th>
              <th class="text-center">Äiá»ƒm</th>
              <th class="text-center">Xáº¿p loáº¡i</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let grade of studentGrades">
              <td>
                <strong>{{ grade.courseName }}</strong>
              </td>
              <td class="text-center">
                <span class="badge badge-credits">{{ grade.credits }}</span>
              </td>
              <td class="text-center">
                <span class="score-badge" [ngClass]="getScoreClass(grade.score)">
                  {{ grade.score | number:'1.2-2' }}
                </span>
              </td>
              <td class="text-center">
                <span class="classification-badge" [ngClass]="getClassificationClass(grade.classification)">
                  {{ grade.classification }}
                </span>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr class="summary-row">
              <td><strong>Tá»•ng káº¿t</strong></td>
              <td class="text-center"><strong>{{ totalCredits }}</strong></td>
              <td class="text-center">
                <strong [ngClass]="getScoreClass(averageScore)">{{ averageScore | number:'1.2-2' }}</strong>
              </td>
              <td class="text-center">
                <span class="classification-badge" [ngClass]="getClassificationClass(getOverallClassification())">
                  {{ getOverallClassification() }}
                </span>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h2>Thao tÃ¡c nhanh</h2>
      <div class="actions-grid">
        <button class="action-btn" [routerLink]="['/grades']">
          <span class="action-icon">ğŸ“Š</span>
          <span>Xem chi tiáº¿t Ä‘iá»ƒm</span>
        </button>
        <button class="action-btn" [routerLink]="['/profile']">
          <span class="action-icon">ğŸ‘¤</span>
          <span>ThÃ´ng tin cÃ¡ nhÃ¢n</span>
        </button>
        <button class="action-btn" [routerLink]="['/courses']">
          <span class="action-icon">ğŸ“š</span>
          <span>Xem mÃ´n há»c</span>
        </button>
      </div>
    </div>
  </div>
</div>
