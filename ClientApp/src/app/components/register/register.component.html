<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h2>üìù ƒêƒÇNG K√ù T√ÄI KHO·∫¢N</h2>
      <p class="text-muted">T·∫°o t√†i kho·∫£n m·ªõi ƒë·ªÉ s·ª≠ d·ª•ng h·ªá th·ªëng</p>
    </div>

    <!-- General Error Message -->
    <div class="alert alert-danger" *ngIf="validationErrors.general">
      <strong>‚ùå L·ªói:</strong> {{ validationErrors.general }}
    </div>

    <form (ngSubmit)="onSubmit()" #registerFormElement="ngForm">
      <!-- Username -->
      <div class="mb-3">
        <label for="username" class="form-label">
          <i class="fas fa-user"></i> T√™n ƒëƒÉng nh·∫≠p <span class="text-danger">*</span>
        </label>
        <input
          type="text"
          id="username"
          name="username"
          class="form-control"
          [(ngModel)]="registerForm.username"
          (focus)="clearError('username')"
          [class.is-invalid]="validationErrors.username"
          placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p (3-50 k√Ω t·ª±)"
          maxlength="50"
          required
        />
        <div class="invalid-feedback" *ngIf="validationErrors.username">
          {{ validationErrors.username }}
        </div>
        <small class="form-text text-muted">Ch·ªâ ƒë∆∞·ª£c ch·ª©a ch·ªØ c√°i, s·ªë v√† d·∫•u g·∫°ch d∆∞·ªõi</small>
      </div>

      <!-- Email -->
      <div class="mb-3">
        <label for="email" class="form-label">
          <i class="fas fa-envelope"></i> Email <span class="text-danger">*</span>
        </label>
        <input
          type="email"
          id="email"
          name="email"
          class="form-control"
          [(ngModel)]="registerForm.email"
          (focus)="clearError('email')"
          [class.is-invalid]="validationErrors.email"
          placeholder="example@gmail.com"
          maxlength="100"
          required
        />
        <div class="invalid-feedback" *ngIf="validationErrors.email">
          {{ validationErrors.email }}
        </div>
        <small class="form-text text-muted">M√£ x√°c th·ª±c s·∫Ω ƒë∆∞·ª£c g·ª≠i ƒë·∫øn email n√†y</small>
      </div>

      <!-- Password -->
      <div class="mb-3">
        <label for="password" class="form-label">
          <i class="fas fa-lock"></i> M·∫≠t kh·∫©u <span class="text-danger">*</span>
        </label>
        <div class="input-group">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            name="password"
            class="form-control"
            [(ngModel)]="registerForm.password"
            (focus)="clearError('password')"
            [class.is-invalid]="validationErrors.password"
            placeholder="Nh·∫≠p m·∫≠t kh·∫©u (t·ªëi thi·ªÉu 6 k√Ω t·ª±)"
            required
          />
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="togglePasswordVisibility()"
          >
            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>
        <div class="invalid-feedback d-block" *ngIf="validationErrors.password">
          {{ validationErrors.password }}
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="mb-3">
        <label for="confirmPassword" class="form-label">
          <i class="fas fa-lock"></i> X√°c nh·∫≠n m·∫≠t kh·∫©u <span class="text-danger">*</span>
        </label>
        <div class="input-group">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            name="confirmPassword"
            class="form-control"
            [(ngModel)]="registerForm.confirmPassword"
            (focus)="clearError('confirmPassword')"
            [class.is-invalid]="validationErrors.confirmPassword"
            placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u"
            required
          />
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="toggleConfirmPasswordVisibility()"
          >
            <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
          </button>
        </div>
        <div class="invalid-feedback d-block" *ngIf="validationErrors.confirmPassword">
          {{ validationErrors.confirmPassword }}
        </div>
      </div>

      <!-- Role -->
      <div class="mb-3">
        <label for="role" class="form-label">
          <i class="fas fa-user-tag"></i> Vai tr√≤
        </label>
        <select
          id="role"
          name="role"
          class="form-select"
          [(ngModel)]="registerForm.role"
        >
          <option value="Student">Sinh vi√™n</option>
          <option value="Teacher">Gi·∫£ng vi√™n</option>
        </select>
      </div>

      <!-- Full Name (Optional) -->
      <div class="mb-3">
        <label for="fullName" class="form-label">
          <i class="fas fa-id-card"></i> H·ªç v√† t√™n (T√πy ch·ªçn)
        </label>
        <input
          type="text"
          id="fullName"
          name="fullName"
          class="form-control"
          [(ngModel)]="registerForm.fullName"
          placeholder="Nh·∫≠p h·ªç v√† t√™n ƒë·∫ßy ƒë·ªß"
          maxlength="100"
        />
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        class="btn btn-primary btn-register w-100"
        [disabled]="isLoading"
      >
        <span *ngIf="!isLoading">
          <i class="fas fa-user-plus"></i> ƒêƒÉng k√Ω
        </span>
        <span *ngIf="isLoading">
          <i class="fas fa-spinner fa-spin"></i> ƒêang x·ª≠ l√Ω...
        </span>
      </button>
    </form>

    <!-- Login Link -->
    <div class="text-center mt-3">
      <p class="mb-0">
        ƒê√£ c√≥ t√†i kho·∫£n?
        <a routerLink="/login" class="register-link">ƒêƒÉng nh·∫≠p ngay</a>
      </p>
    </div>
  </div>
</div>
